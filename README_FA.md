๐ฎ๐ท ูุงุฑุณ | ๐ [English Version](README.md)

# ๐ Pahlavi Tunnel

ูุฏุฑุชโฺฉููุฏู ุญุฑููโุง Reverse TCP Tunnel  
ฺูุฏ ุงุณูุงุช โข AutoSync โข ุจุฑุฑุณ ุณูุงูุช โข ุจูููโุณุงุฒ BBR โข ฺูุฏ ุฑูุด Port Forward

---

<p align="center">
  <b>ุณุจฺฉ โข ูพุงุฏุงุฑ โข ููุงุณุจ ุงุณุชูุงุฏู ุนูู</b>
</p>

---

# ๐ ูุนุฑู ูพุฑูฺู

Pahlavi Tunnel ฺฉ ุณุณุชู ุชููู TCP ูุนฺฉูุณ ุงุณุช ฺฉู ุจุฑุง ุงุชุตุงู ุฏู ุณุฑูุฑ ุทุฑุงุญ ุดุฏู ุงุณุช:

- ๐ฎ๐ท ุณุฑูุฑ ุงุฑุงู (IR)
- ๐ ุณุฑูุฑ ุฎุงุฑุฌ (EU)

ุงู ุณุณุชู ุงุฒ ฺูุฏู ูุงุจูุช ุญุฑููโุง ูุงููุฏ ูุฏุฑุช ฺูุฏ ุงุณูุงุชุ ููฺฏุงูโุณุงุฒ ุฎูุฏฺฉุงุฑ ูพูุฑุชโูุงุ ุจุฑุฑุณ ุณูุงูุช ุณุฑูุณ ู ุจูููโุณุงุฒ ุดุจฺฉู ูพุดุชุจุงู ูโฺฉูุฏ.

---

# ๐ง ูุนูุงุฑ ุณุณุชู

```
ฺฉุงุฑุจุฑ โ ุณุฑูุฑ IR โ ุณุฑูุฑ EU
                โ
        Bridge Port (ุงุชุตุงู ุงุตู)
                โ
         Sync Port (ููฺฏุงูโุณุงุฒ)
```

### ๐น Bridge Port
ูพูุฑุช ุงุตู ุงุฑุชุจุงุท ูพุงุฏุงุฑ ุจู ุณุฑูุฑ ุงุฑุงู ู ุฎุงุฑุฌ ุงุณุช.  
ุชูุงู ุชุฑุงูฺฉ TCP ุงุฒ ุงู ูพูุฑุช ุนุจูุฑ ูโฺฉูุฏ.

### ๐น Sync Port
ุจุฑุง ููุงููฺฏโุณุงุฒ ุฎูุฏฺฉุงุฑ ูพูุฑุชโูุง ุจู ุฏู ุณุฑูุฑ ุงุณุชูุงุฏู ูโุดูุฏ.

---

# ๐ ูุงุจูุชโูุง

| ูุงุจูุช | ุชูุถุญ |
|---------|--------|
| Reverse TCP Tunnel | ุงุชุตุงู ูพุงุฏุงุฑ ุจู IR ู EU |
| Multi-Slot (1โ10) | ุฐุฎุฑู ฑฐ ฺฉุงููฺฏ ูุฎุชูู |
| AutoSync | ุงุฌุงุฏ ู ุญุฐู ุฎูุฏฺฉุงุฑ ูพูุฑุชโูุง |
| Cron Health Check | ุฑุณุชุงุฑุช ุฎูุฏฺฉุงุฑ ุฏุฑ ุตูุฑุช ุชููู |
| ุจูููโุณุงุฒ BBR | ุงูุฒุงุด ฺฉุงุฑุง ุดุจฺฉู |
| ฺูุฏ ุฑูุด Port Forward | iptables / nftables / HAProxy / socat |
| systemd Integration | ุงุฌุฑุง ุฎูุฏฺฉุงุฑ ุจุนุฏ ุงุฒ ุฑุจูุช |
| ฺฉูุชุฑู Thread | ุฌููฺฏุฑ ุงุฒ ูุตุฑู ุจุด ุงุฒ ุญุฏ ููุงุจุน |
| ุชูุธูุงุช ูพุดุฑูุชู | ฺฉูุชุฑู ุงุฒ ุทุฑู ENV |

---

# ๐ฆ ุฑุงูููุง ูุตุจ

---

# ๐ข ูุฑุญูู ุงูู โ ูุตุจ ุฑู ุณุฑูุฑ ุงุฑุงู

```bash
bash <(curl -fsSL https://raw.githubusercontent.com/Zehnovik/ilyaahmadi-tunnel/main/install.sh)
```

ุจุฑุง ุงุฌุฑุง ููู ูุฏุฑุช ุชุงูู ุฏุณุชูุฑ ุฒุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ:

```bash
sudo pahlavi-tunnel
```


---

## 1๏ธโฃ ูุตุจ ฺฉุงูู

ุงุฒ ููู ุงูุชุฎุงุจ ฺฉูุฏ:

```
5) Install / Complete Setup
```

ุงู ฺฏุฒูู:
- ูุงุจุณุชฺฏโูุง ุฑุง ูุตุจ ูโฺฉูุฏ
- ุณุฑูุณ systemd ุงุฌุงุฏ ูโฺฉูุฏ
- ุณุงุฎุชุงุฑ ููุฑุฏูุงุฒ ุฑุง ุขูุงุฏู ูโฺฉูุฏ

---

## 2๏ธโฃ ุงุฌุงุฏ ุชุงูู

```
1) Create Tunnel
2) IRAN Server
```

---

## 3๏ธโฃ ุงูุชุฎุงุจ Slot (1 ุชุง 10)

ูุฑ Slot ฺฉ ฺฉุงููฺฏ ุฌุฏุงฺฏุงูู ุฐุฎุฑู ูโฺฉูุฏ.

---

## 4๏ธโฃ ูุงุฑุฏ ฺฉุฑุฏู Bridge Port

ูพุดโูุฑุถ:

```
7000
```

ุจุงุฏ ุฏุฑ ูุฑ ุฏู ุณุฑูุฑ ฺฉุณุงู ุจุงุดุฏ.

---

## 5๏ธโฃ ูุงุฑุฏ ฺฉุฑุฏู Sync Port

ูพุดโูุฑุถ:

```
7001
```

ุจุงุฏ ุฏุฑ ูุฑ ุฏู ุณุฑูุฑ ฺฉุณุงู ุจุงุดุฏ.

---

## 6๏ธโฃ ูุนุงูโุณุงุฒ AutoSync

ุงฺฏุฑ ูโุฎูุงูุฏ ููฺฏุงูโุณุงุฒ ุฎูุฏฺฉุงุฑ ูุนุงู ุจุงุดุฏ:

```
y
```

ุฏุฑ ุบุฑ ุงู ุตูุฑุช:

```
n
```

---

## 7๏ธโฃ ูุงุฑุฏ ฺฉุฑุฏู ูพูุฑุช ฺฉุงููฺฏ

ูพูุฑุช ุณุฑูุณ ููุฑุฏ ูุธุฑ ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ.

ุฏุฑ ูพุงุงู:

```
Enter
```

---

# ๐ต ูุฑุญูู ุฏูู โ ูุตุจ ุฑู ุณุฑูุฑ ุฎุงุฑุฌ

ูุฑุงุญู ูุดุงุจู ุฑุง ุฑู ุณุฑูุฑ EU ุงูุฌุงู ุฏูุฏ:

```bash
bash <(curl -fsSL https://raw.githubusercontent.com/Zehnovik/ilyaahmadi-tunnel/main/install.sh)
```

---

## 1๏ธโฃ ูุตุจ ฺฉุงูู

```
5) Install / Complete Setup
```

---

## 2๏ธโฃ ุงุฌุงุฏ ุชุงูู

```
1) Create Tunnel
2) EU Server
```

- ููุงู Slot ุงูุชุฎุงุจ ุดุฏู ุฏุฑ IR ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
- ุขูพ ุณุฑูุฑ ุงุฑุงู ุฑุง ูุงุฑุฏ ฺฉูุฏ
- ููุงู Bridge Port ุฑุง ูุงุฑุฏ ฺฉูุฏ
- ููุงู Sync Port ุฑุง ูุงุฑุฏ ฺฉูุฏ

---

# โถ๏ธ ุงุฌุฑุง ุชุงูู

---

## ๐ข ุฑู ุณุฑูุฑ ุงุฑุงู

```
2) Manage Tunnel
โ ุงูุชุฎุงุจ IR
โ ุงูุชุฎุงุจ Slot
โ 2) Start
โ 5) Status
```

ุจุงุฏ ูุถุนุช:

```
Running
```

ููุงุด ุฏุงุฏู ุดูุฏ.

---

## ๐ต ุฑู ุณุฑูุฑ ุฎุงุฑุฌ

ููู ูุฑุงุญู ุฑุง ุชฺฉุฑุงุฑ ฺฉูุฏ.

---

# ๐ ุชุจุฑฺฉ!

ุชุงูู ุจุง ููููุช ูุชุตู ุดุฏ.

---

# โ ุงูฺฉุงูุงุช ุชฺฉูู

---

## ๐ ุจูููโุณุงุฒ ุณุฑูุฑ (ูุนุงูโุณุงุฒ BBR)

```
9) Optimize Server
```

ุงู ฺฏุฒูู:
- BBR ุฑุง ูุนุงู ูโฺฉูุฏ
- ุชูุธูุงุช sysctl ุฑุง ุงุนูุงู ูโฺฉูุฏ
- ุนููฺฉุฑุฏ ุดุจฺฉู ุฑุง ุจูุจูุฏ ูโุฏูุฏ

---

## ๐ ูุนุงูโุณุงุฒ Cron (ุจุฑุฑุณ ุณูุงูุช)

```
3) Enable Cron
```

ูโุชูุงูุฏ ุฒูุงู ุจุฑุฑุณ ุฑุง ุชุนู ฺฉูุฏ.

ุฏุฑ ุตูุฑุช ุชูููุ ุณุฑูุณ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุฑุณุชุงุฑุช ูโุดูุฏ.

---

# ๐ ุฑูุดโูุง Port Forward

- iptables (DNAT)
- nftables
- HAProxy (ูุงู ด)
- socat

ูุฑฺฉุฏุงู ุดุงูู:
- ุงูุฒูุฏู ูุงููู
- ุญุฐู ูุงููู
- ูุดุงูุฏู ููุงูู

---

# โก ุชูุธูุงุช ูพุดุฑูุชู

ุจุฑุง ุจูููโุณุงุฒ ุจุดุชุฑ:

```bash
export USER_WORKERS=128
export AUTO_SOCKBUF=1
export BUF_COPY_BYTES=262144
export METRICS_PORT=9109
```

---

# ๐ ุชูุตูโูุง ุงููุช

- ููุท ูพูุฑุชโูุง ุถุฑูุฑ ุฑุง ุจุงุฒ ฺฉูุฏ
- Bridge ู Sync Port ุฑุง ุงูู ูฺฏู ุฏุงุฑุฏ
- ุงุฒ ูุงุฑูุงู ููุงุณุจ ุงุณุชูุงุฏู ฺฉูุฏ
- ูุถุนุช ุณุฑูุณ ุฑุง ูุฑุชุจ ุจุฑุฑุณ ฺฉูุฏ

---

# ๐ ุนุจโุงุจ

ุจุฑุฑุณ ูุถุนุช ุณุฑูุณ:

```bash
systemctl status pahlavi
```

ุจุฑุฑุณ ูพูุฑุชโูุง ุจุงุฒ:

```bash
ss -lntp
```

ุชุณุช ุงุชุตุงู:

```bash
nc -zv IR_IP 7000
```

---

# ๐ ูพุดููุงุฏ ุจุฑุง ุงุณุชูุงุฏู ุญุฑููโุง

- ูุนุงูโุณุงุฒ BBR
- ูุนุงูโุณุงุฒ Cron
- ุงุณุชูุงุฏู ุงุฒ HAProxy ุจุฑุง ูุฏุฑุช ุจูุชุฑ
- ูุงูุชูุฑูฺฏ ููุธู

---

# โ ุณูุงูุงุช ูุชุฏุงูู

### ุขุง Bridge ู Sync ุจุงุฏ ฺฉุณุงู ุจุงุดูุฏุ
ุจููุ ุฏุฑ ูุฑ ุฏู ุณุฑูุฑ ุจุงุฏ ุฏููุงู ฺฉุณุงู ุจุงุดูุฏ.

### ุขุง ูโุชูุงู ฺูุฏ ุชุงูู ุฏุงุดุชุ
ุจููุ ุงุฒ Slotูุง ูุฎุชูู ุงุณุชูุงุฏู ฺฉูุฏ.

### ุขุง ุจุนุฏ ุงุฒ ุฑุจูุช ุงุฌุฑุง ูโุดูุฏุ
ุจููุ ุงุฒ ุทุฑู systemd.

---

# โค๏ธ ุชูุณุนู ุฏุงุฏู ุดุฏู ุจุง ุชูุฑฺฉุฒ ุจุฑ ูพุงุฏุงุฑ ู ุนููฺฉุฑุฏ
